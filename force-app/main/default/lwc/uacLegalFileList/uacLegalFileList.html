<!--
  @File Name          : uacLegalFileList.html
  @Description        :
  @Author             : Ankur Aggarwal (Deloitte)
  @Group              :
  @Last Modified By   : Ankur Aggarwal (Deloitte)
  @Last Modified On   : 8/25/2020,
  @Modification Log   :
  Ver       Date          Author      		    Modification
  1.0    8/25/2020   Ankur Aggarwal (Deloitte)     Initial Version
-->
<template>

    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading"></lightning-spinner>
    </template>

    <div class="slds-card">
        <div class="slds-grid slds-page-header">
            <header class="slds-media slds-media--center slds-has-flexi-truncate">
                <div class="slds-media__figure stencil slds-avatar slds-avatar_small" aria-hidden="true" data-aura-rendered-by="634:0">
                    <lightning-icon icon-name="standard:file" size="small"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <a class="slds-card__header-link baseCard__header-title-container" href="#">
                            {Label} ({lstFile.length})
                        </a>
                    </h2>
                </div>
            </header>
            <div class="slds-no-flex">
                <div class="actionsContainer">
                    <lightning-button-group>
                        <lightning-button label="Refresh"
                            onclick={refreshFiles}>
                        </lightning-button>
                    </lightning-button-group>
                </div>
            </div>
        </div>

        <template if:false={showTable}>
            <div class="slds-card__body_inner slds-grid slds-grid_align-center slds-m-bottom_large">
            </div>
        </template>
        <template if:true={showTable}>
            <div style={dataTableDivStyle}>
                <lightning-datatable
                    key-field="ContentDocumentId"
                    data={lstFile}
                    columns={lstColumn}
                    hide-checkbox-column
                    show-row-number-column
                    default-sort-direction={defaultSortDirection}
                    sorted-direction={sortDirection}
                    sorted-by={sortedBy}
                    onsort={handleSort}
                    onrowaction={handleRowAction}>
                </lightning-datatable>
            </div>
        </template>

        <template if:true={isModalOpen}>
            <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1"
                aria-labelledby="modal-add-file" aria-modal="true"
                aria-describedby="modal-content-add-file"
                class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                            title="Close"
                            onclick={closeModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" >
                            </lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 id="modal-add-file" class="slds-text-heading_medium slds-hyphenate">{addFilesLabel}</h2>
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-grid slds-grid_align-center slds-p-bottom_medium" id="modal-content-add-file">
                        <lightning-file-upload
                            record-id={recordId}
                            multiple
                            onuploadfinished={handleUploadFinish}>
                        </lightning-file-upload>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>
    </div>
</template>